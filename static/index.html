<!DOCTYPE html>
<html lang="en" class="antialiased">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      href="https://unpkg.com/tailwindcss@^2/dist/tailwind.min.css"
      rel="stylesheet"
    />

    <title>URL Shortener Microservice</title>
  </head>
  <body class="bg-gradient-to-b from-pink-300 min-h-screen px-4 to-pink-100">
    <section
      class="max-w-2xl mt-12 mx-auto p-4 rounded-2xl shadow-2xl text-center bg-pink-100"
    >
      <h1 class="text-2xl md:text-4xl text-gray-700 font-black">
        APIs and Microservices Projects - URL Shortener Microservice
      </h1>
      <h3 class="mt-8 text-xl md:text-2xl text-gray-800">Short URL Creation</h3>
      <p class="bg-white font-mono py-2 mt-2">
        POST [project_url]/api/shorturl/new - https://www.google.com
      </p>
      <form class="form mt-4 shadow rounded p-4 flex flex-col">
          <div class="flex mb-2 justify-between items-center flex-wrap">
              <div class="flex justify-between mr-2">

                  <label for="url" class="text-gray-800 flex justify-between">
                      <span class="font-semibold">URL to be shortened</span>
                  </label>
              </div>
            <input type="url" name="url" id="url" class="rounded p-2 flex-grow mr-2" required>
            <button type="Sumbit" class="p-2 bg-pink-500 rounded text-white font-semibold uppercase self-start hover:opacity-75" >post url</button>
        </div>
      </form>
      <h3 class="mt-8 text-xl md:text-2xl text-gray-700">Output:</h3>
      <p
        class="mx-auto bg-gray-800 max-w-2xl mt-8 rounded-xl p-4 md:text-xl break-words font-mono info text-green-200"
      ></p>
      <h3 class="mt-8 text-xl md:text-2xl text-gray-700">Example Usage:</h3>
      <a href="/api/shorturl/3" class="block text-pink-700 hover:text-gray-700 mt-2">[this_project_url]/api/shorturl/3</a>
      <h3 class="mt-8 text-xl md:text-2xl text-gray-700">Will redirect to:</h3>
      <p class="mt-2">https://www.jose-torreblanca.com/</p>
    </section>
    <script>
        var form = document.querySelector('.form');
        var url = document.querySelector('#url');
        form.addEventListener('submit', (e) => {
            e.preventDefault();
            if (url.value) getData()
        })

        function getData() {
            var info = document.querySelector('.info');
            var API_URL = `${document.location.origin}/api/shorturl/new`;
            fetch(API_URL,{
              method: 'POST',
              body: JSON.stringify({original_url: url.value })
            })
                .then((res) => res.json())
                .then((res) => {
                info.innerHTML = JSON.stringify(res);
                });
        }
    </script>
    <footer class="text-center mt-24 text-base md:text-2xl">
      by
      <a
        href="http://github.com/josewhitetower"
        class="text-pink-700 hover:text-gray-700"
        >josewhitetower</a
      >
    </footer>
  </body>
</html>
